# 使用 ChatGPT ，通过自然语言编写 eBPF 程序和追踪 Linux 系统

https://github.com/eunomia-bpf/GPTtrace

这是一个最新的玩具项目：使用 ChatGPT ，通过自然语言编写 eBPF 程序和追踪 Linux 内核

## 我们目前大概的思路

1. 预训练 ebpf 程序，利用一些 ebpf 的开发资料，先和 ChatGPT 对话好多次，教会 ChatGPT 如何写各种 eBPF 程序或者 bpftrace 的 DSL（其实我们在十二月份就干过这事了）
2. 调用 ChatGPT api，并把结果输入 shell 执行，或者写到文件里面编译运行
3. 如果编译和加载报错，把 报错返回给 ChatGPT，让它再生成一个新的 ebpf 程序或者命令

## 进一步的优化可能性

这个玩具项目本身只是想展示一下可能性，很快应该会有更好的类似 ChatGPT 这样的的 api，和更通用的训练/执行框架出来的，希望它能起到抛砖引玉的效果吧。目前看起来还有不少可以优化的空间:

1. 能联网搜索之后，让这个工具去获取 bcc/bpftrace 仓库里面的示例程序学习，效果应该还会好很多；或者让这个应用自己看 Stack Overflow 之类，查询如何编写 eBPF 程序，类似新 Bing 的搜索方式；
2. 提供更多高质量的文档和教程，看起来输出的准确度和教程、代码示例的质量密切相关；
3. 其实还可以多次调用其他工具执行命令返回结果，比如说 ChatGPT 输出命令，用 bpftrace 查询一下当前内核版本和支持的 tracepoint，然后返回输出（这也是一次对话），再给出程序，效果应该还要好不少

## 总结

对于我这样的非 AI 专业研究人员（AI工具和模型的消费者）来说，和传统的训练模型的方式比起来：

- 训练模型不需要整理数据集和清洗数据集，仅仅需要几篇高质量的文档和教程，使用自然语言描述即可；极大地减少了非专业人士的准备工作；
- 只需要对话上下文即可直观和方便地

## 一些参考链接
